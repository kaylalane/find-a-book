import{j as e,r,c as n,e as l,d as o,g as h,h as j,N as m}from"./index-HXcDPisX.js";function x({review:a}){return e.jsxs("div",{className:"review-card",children:[e.jsx("p",{className:"review-card__author",children:a.userName}),e.jsx("p",{children:a.review})]})}function u(){const[a,t]=r.useState([]),i=n();return r.useEffect(()=>{const s=`/api/reviews/${i.id}`;(async()=>{fetch(`${s}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then(async c=>{const d=await c.json();t(d)})})()},[i]),e.jsxs("div",{children:[e.jsx("h2",{children:"Reviews"}),e.jsx("div",{children:a.map(s=>e.jsx(x,{review:s}))})]})}function g(){const{user:a}=l(),t=n(),i=o({queryKey:["book",t.id||""],queryFn:h});if(i.isLoading)return e.jsx(j,{});const s=i.data;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"book-page",children:[e.jsxs("div",{className:"book-page__cover-container",children:[e.jsx(r.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx("img",{src:(s==null?void 0:s.cover)||"",alt:`${s==null?void 0:s.title} cover`,className:"book-page__cover"})}),e.jsxs("div",{className:"default-list-buttons",children:[e.jsx("button",{className:"default-list-buttons",children:"Want to Read"}),e.jsx("button",{className:" default-list-buttons",children:e.jsx("img",{className:"svg-icon",src:"/chevron-down.svg"})})]})]}),e.jsxs("div",{className:"book-page__information",children:[e.jsx("h1",{className:"book-page__title",children:s==null?void 0:s.title}),e.jsxs("p",{className:"book-page__author",children:["by"," ",e.jsx("a",{href:`/author/${s==null?void 0:s.authorId}`,children:s==null?void 0:s.authorName})]}),s!=null&&s.description?e.jsx("p",{children:s.description}):e.jsx("p",{children:"There's no book description"}),e.jsx("h2",{className:"heading",children:"Ratings & Reviews"}),e.jsxs("div",{className:"book-page__review",children:[e.jsx("p",{children:"What do you think?"}),e.jsx("img",{src:a==null?void 0:a.imageUrl,className:"avatar-image avatar-image--large"}),s&&e.jsx(m,{book:s}),e.jsx("a",{href:`/review/${(s==null?void 0:s._id)||""}`,className:"btn btn-primary",children:"Create a Review"})]}),e.jsx(u,{})]})]})})}export{g as default};
