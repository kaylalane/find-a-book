import{r as i,j as e,e as h,f as x,c as u}from"./index-4qHAoL08.js";const j={review:"Write your review. (Optional)",overallRating:null};function v({book:s}){const[r,d]=i.useState(j),[n,o]=i.useState(-1),l=async a=>{a.preventDefault();try{const m=await(await fetch(`/api/review/${s._id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({review:r.review,overall_rating:n,bookId:s._id,authorId:s.authorId,authorName:s.authorName,userId:"657bd9cb20694bcc71eea5e7"})})).json();console.log(m)}catch(t){console.log(t)}};return e.jsxs("div",{children:[e.jsx("div",{className:" my-1",children:[...new Array(5)].map((a,t)=>e.jsx(h,{className:x("btn star ",t<=n&&"star--selected"),intent:"text",onClick:()=>o(t),children:e.jsxs("span",{className:"sr-only",children:[t+1," out of 5 stars"]})},t))}),e.jsxs("form",{action:"",className:" flex flex-col border-t border-slate-600 ",children:[e.jsxs("label",{htmlFor:"",children:[e.jsx("p",{className:" my-2",children:"What did you think?"}),e.jsx("textarea",{name:"",id:"",className:" w-full rounded-sm mb-4 max-w-lg",value:r.review,onChange:a=>d({...r,review:a.target.value})})]}),e.jsx(h,{intent:"secondary",onClick:a=>l(a),children:"Post"})]})," "]})}function f(){const[s,c]=i.useState(),r=u();return i.useEffect(()=>{(async()=>{const n=`/api/books/${r.id}`;fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}}).then(async o=>{const l=await o.json();c(l)})})()},[]),e.jsx(e.Fragment,{children:s&&e.jsxs("div",{className:"px-4",children:[e.jsxs("h1",{className:"text-2xl mb-4",children:[e.jsx("a",{href:`/books/${s._id}`,className:" underline",children:s.title})," ","> Review"]}),e.jsxs("div",{className:" flex gap-4",children:[e.jsx("img",{src:s.cover,alt:s.title}),e.jsxs("div",{children:[e.jsx("a",{href:`/books/${s._id}`,className:" text-xl",children:s.title}),e.jsxs("p",{children:["by"," ",e.jsx("a",{href:`/author/${s.authorId}`,children:s.authorName})]})]})]}),e.jsx(v,{book:s})]})})}export{f as default};
