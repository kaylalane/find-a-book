import{j as s,r as n,c as t,d as o,e as l,g as h}from"./index-KDzMasfK.js";import{N as m}from"./NewReviewStars-bHwEv52O.js";import{u as p}from"./useClerk-7TgjYqNx.js";function j({review:a}){return s.jsxs("div",{className:"review-card",children:[s.jsx("p",{className:"review-card__author",children:a.userName}),s.jsx("p",{children:a.review})]})}function x(){const[a,r]=n.useState([]),i=t();return n.useEffect(()=>{const e=`/api/reviews/${i.id}`;(async()=>{fetch(`${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then(async c=>{const d=await c.json();r(d)})})()},[i]),s.jsxs("div",{children:[s.jsx("h2",{children:"Reviews"}),s.jsx("div",{children:a.map(e=>s.jsx(j,{review:e}))})]})}function f(){const{user:a}=p(),r=t(),i=o({queryKey:["book",r.id||""],queryFn:l});if(i.isLoading)return s.jsx(h,{});const e=i.data;return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"book-page",children:[s.jsx("div",{className:"book-page__cover-container",children:s.jsx(n.Suspense,{fallback:s.jsx("div",{children:"Loading..."}),children:s.jsx("img",{src:(e==null?void 0:e.cover)||"",alt:`${e==null?void 0:e.title} cover`,className:"book-page__cover"})})}),s.jsxs("div",{className:"book-page__information",children:[s.jsx("h1",{className:"book-page__title",children:e==null?void 0:e.title}),s.jsxs("p",{className:"book-page__author",children:["by"," ",s.jsx("a",{href:`/author/${e==null?void 0:e.authorId}`,children:e==null?void 0:e.authorName})]}),e!=null&&e.description?s.jsx("p",{children:e.description}):s.jsx("p",{children:"There's no book description"}),s.jsx("h2",{className:"heading",children:"Ratings & Reviews"}),s.jsxs("div",{className:"book-page__review",children:[s.jsx("p",{children:"What do you think?"}),s.jsx("img",{src:a==null?void 0:a.imageUrl,className:"user-image"}),e&&s.jsx(m,{book:e}),s.jsx("a",{href:`/review/${(e==null?void 0:e._id)||""}`,className:"btn btn-primary",children:"Create a Review"})]}),s.jsx(x,{})]})]})})}export{f as default};
